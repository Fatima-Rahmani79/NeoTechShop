<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v27.1.0/dist/font-face.css" rel="stylesheet"
    type="text/css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <link rel="stylesheet" href="assets/css/main.css" />

  <title>NeoTechShop|ูุงูุชูุฑ</title>
</head>

  <body>
    <header class="header">
    <nav class="nav">
      <div class="nav-top">
        <img class="nav-logo" src="assets/logo/logo-dark-transparent.png"
          alt="NeoTechShop logo, ููฺฏู ุณุงุช ููุชฺฉ ุดุงูพ" />

        <div class="search">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input type="text" class="nav-search" placeholder="ุฌุณุชุฌู..." />
        </div>
        <div id="searchResults" class="search-results"></div>

        <div class="left">
          
          <span id="welcomeNav" style="display: none"></span>
          <button class="btn" id="logoutNav" >
            ุฎุฑูุฌ
          </button>
          <button class="login">
            <a href="auth.html" class="btn-login">
              <i class="fa-solid fa-user fa-2x"></i><span class="nav-icon-text">ูุฑูุฏ / ุซุจุช ูุงู</span>
            </a>
          </button>


          <div class="position-relative d-inline-block cart-icon">
            <button id="cartBtn" class="cart-icon">
              <span id="cartCount"
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
              <i class="fas fa-shopping-cart fa-2x"></i><span class="nav-icon-text">ุณุจุฏ ุฎุฑุฏ</span>
            </button>
          </div>
        </div>
      </div>
      <div class="nav-bottom">
        <ul id="nav-links" class="nav-links">
          <li class="nav-item">
            <a class="nav-link active" href="index.html">ุตูุญู ุงุตู</a>
          </li>
          <li class="dropdown">
            <a href="#">ูุญุตููุงุช</a>
            <div class="dropdown-content">
              <a href="loptop-products-listing.html">ููพโุชุงูพ</a>
              <a href="monitor-products-listing.html">ูุงูุชูุฑ</a>
              <a href="audio-products-listing.html">ููุงุฒู ุตูุช</a>
              <a href="accessory-products.html">ููุงุฒู ุฌุงูุจ</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html">ุงุฑุชุจุงุท ุจุง ูุง</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="cart-page.html">ุณุจุฏ ุฎุฑุฏ ุดูุง</a>
          </li>
        </ul>

        <button class="hamburger" id="hamburger">
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>
    </nav>
  </header>

    <div class="container-fluid PLP-container my-4">
      <div class="row">
        <!-- ูุญุตููุงุช -->
        <main class="col-lg-9 col-md-8 col-12">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="section__header">ูุงูุชูุฑ</h2>
            <select id="sortProducts" class="form-select w-auto">
              <option value="">ูุฑุชุจโุณุงุฒ</option>
              <option value="price-asc">ููุช ุตุนูุฏ</option>
              <option value="price-desc">ููุช ูุฒูู</option>
              <option value="name-asc">ูุงู (A-Z)</option>
              <option value="name-desc">ูุงู (Z-A)</option>
            </select>
          </div>

          <div
            class="row row-cols-1 row-cols-md-2 g-4 align-items-stretch"
            id="products"
          >
            <!-- ฺฉุงุฑุชโูุง ุงูุฌุง ุฑูุฏุฑ ูโุดููุฏ -->
          </div>

          <p id="noProducts" style="display: none">ูุญุตูู ุงูุช ูุดุฏ ๐</p>

          <div id="pagination" class="mt-3 d-flex flex-wrap"></div>
        </main>

        <!-- ุณุงุฏุจุงุฑ -->
        <aside class="col-lg-3 col-md-4 col-12 mb-4">
          <div class="aside-container-PLP">
            <h3 class="aside-title">ููุชุฑ ูุญุตููุงุช</h3>

            <div class="filter-group mb-3">
              <h5>ููุช (ุญุฏุงฺฉุซุฑ)</h5>
              <input
                type="range"
                id="priceFilter"
                min="0"
                max="200000"
                step="1000"
              />
              <span id="priceValue">200,000</span> ุงูุบุงู
            </div>

            <div class="filter-group mb-3">
              <h5>ุจุฑูุฏ</h5>
              <label
                ><input type="checkbox" class="brandFilter" value="DELL" />
                DELL</label
              ><br />
              <label
                ><input type="checkbox" class="brandFilter" value="HP" />
                HP</label
              ><br />
              <label
                ><input type="checkbox" class="brandFilter" value="Samsung" />
                Samsung</label
              >
            </div>

            <div class="filter-group">
              <h5>ุฑุถุงุช ูุดุชุฑ</h5>
              <label
                ><input
                  type="radio"
                  name="rating"
                  class="ratingFilter"
                  value="4"
                />
                ดโ ุจู ุจุงูุง</label
              ><br />
              <label
                ><input
                  type="radio"
                  name="rating"
                  class="ratingFilter"
                  value="3"
                />
                ณโ ุจู ุจุงูุง</label
              >
            </div>
          </div>
        </aside>
      </div>
    </div>
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-section f1">
          <ul class="footer-links">
            <img
              class="nav-logo"
              src="assets/logo/logo-light-transparent.png"
              alt="NeoTechShop logo, ููฺฏู ุณุงุช ููุชฺฉ ุดุงูพ"
            />
            <li><a href="index.html">ุตูุญู ุงุตู</a></li>
            <li><a href="product.html">ูุญุตููุงุช</a></li>
            <li><a href="contact.html">ุชูุงุณ ุจุง ูุง</a></li>
          </ul>
        </div>
        <div class="footer-section footer-about">
          <h3 class="footer-title">ุฏุฑุจุงุฑู ูุง</h3>
          <p>
            ููุชฺฉ ุดุงูพุ ูุฑูุดฺฏุงู ุขููุงู ุชุฌูุฒุงุช ุชฺฉููููฺ ุจุง ุจูุชุฑู ููุชโูุง ู ุฎุฏูุงุช
            ูพุณ ุงุฒ ูุฑูุด.
          </p>
        </div>
        <div class="footer-section">
          <h3 class="footer-title">ุดุจฺฉูโูุง ุงุฌุชูุงุน</h3>
          <div class="social-icons">
            <a href="https://facebook.com/neotechshop"
              ><i class="fa-brands fa-facebook-f"></i
            ></a>
            <a href="https://x.com/neotechshop"
              ><i class="fa-brands fa-x"></i
            ></a>
            <a href="https://instagram.com/neotechshop"
              ><i class="fa-brands fa-instagram"></i
            ></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 NeoTechShop, All rights reserved</p>
      </div>
    </footer>
    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- ููุฏุงู ุณุจุฏ ุฎุฑุฏ -->
    <div id="cartModal" class="cart-modal">
      <div class="cart-modal-content">
        <span class="close-modal">&times;</span>
        <h3>ุณุจุฏ ุฎุฑุฏ</h3>

        <div class="cart-items" id="cartItems"></div>

        <div class="cart-summary">
          <p>ุฌูุน ฺฉู: <span id="cartTotal">ฐ ุงูุบุงู</span></p>
          <div class="cart-buttons">
            <a href="cart-page.html" class="btn-view-cart">ูุดุงูุฏู ฺฉุงูู</a>
            <a href="checkout.html" class="btn-checkout">ูพุฑุฏุงุฎุช</a>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://kit.fontawesome.com/00e2dc1dd2.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/cart.js"></script>
    <script src="assets/js/script.js"></script>
    <script>
      // PLP pages
      let allProducts = [];
      let currentPage = 1;
      const itemsPerPage = 6;

      async function loadProducts() {
        const res = await fetch("assets/data/products.json");
        const products = await res.json();
        allProducts = products.filter((p) => p.category === "monitor");
        applyFilters();
      }

      function renderProducts(products) {
        const container = document.getElementById("products");
        const noProducts = document.getElementById("noProducts");

        const totalPages = Math.ceil(products.length / itemsPerPage);
        if (currentPage > totalPages) currentPage = totalPages || 1;

        const start = (currentPage - 1) * itemsPerPage;
        const paginatedProducts = products.slice(start, start + itemsPerPage);

        if (paginatedProducts.length === 0) {
          container.innerHTML = "";
          noProducts.style.display = "block";
          document.getElementById("pagination").innerHTML = "";
          return;
        } else {
          noProducts.style.display = "none";
        }

        let html = "";
        paginatedProducts.forEach((p) => {
          html += `
      <div class="col">
        <div class="product-card h-100 d-flex flex-column justify-content-between">
          <img src="${p.images[0]}" alt="${p.name}" loading="lazy">
          <h3>${p.shortName}</h3>
          <p>ูุฏู: ${p.name}</p>
          <p class="price">ููุช: ${p.price * USD_TO_AFN.toLocaleString()} ุงูุบุงู</p>
          <p>ุงูุชุงุฒ ูุดุชุฑ: ${
            p.rating?.average ? p.rating.average.toFixed(1) : "N/A"
          }โ</p>
          <p>${p.shortDesc}</p>
          <button class="CTA">
            <a href="product.html?id=${p.id}">ูุดุงูุฏู ูุญุตูู</a>
          </button>
        </div>
      </div>
    `;
        });

        container.innerHTML = html;
        renderPagination(totalPages);
      }

      function renderPagination(totalPages) {
        const paginationContainer = document.getElementById("pagination");
        let html = "";

        if (totalPages <= 1) {
          paginationContainer.innerHTML = "";
          return;
        }

        if (currentPage > 1)
          html += `<button class="btn btn-sm btn-outline-primary me-1" onclick="gotoPage(${
            currentPage - 1
          })">ูุจู</button>`;

        for (let i = 1; i <= totalPages; i++) {
          html += `<button class="btn btn-sm ${
            i === currentPage ? "btn-primary" : "btn-outline-primary"
          } me-1" onclick="gotoPage(${i})">${i}</button>`;
        }

        if (currentPage < totalPages)
          html += `<button class="btn btn-sm btn-outline-primary" onclick="gotoPage(${
            currentPage + 1
          })">ุจุนุฏ</button>`;

        paginationContainer.innerHTML = html;
      }

      function gotoPage(page) {
        currentPage = page;
        applyFilters();
      }

      function applyFilters() {
        let filtered = [...allProducts];

        // ุจุฑูุฏ
        const brands = Array.from(
          document.querySelectorAll(".brandFilter:checked")
        ).map((b) => b.value);
        if (brands.length)
          filtered = filtered.filter((p) => brands.includes(p.brand));

        // ููุช
        const maxPrice = parseInt(document.getElementById("priceFilter").value);
        filtered = filtered.filter((p) => p.price * USD_TO_AFN <= maxPrice);

        // ุฑุถุงุช ูุดุชุฑ
        const rating = document.querySelector(".ratingFilter:checked")?.value;
        if (rating)
          filtered = filtered.filter((p) => (p.rating?.average || 0) >= rating);

        // ูุฑุชุจ ุณุงุฒ
        const sortVal = document.getElementById("sortProducts").value;
        if (sortVal === "price-asc") filtered.sort((a, b) => a.price * USD_TO_AFN - b.price * USD_TO_AFN);
        else if (sortVal === "price-desc")
          filtered.sort((a, b) => b.price * USD_TO_AFN - a.price * USD_TO_AFN);
        else if (sortVal === "name-asc")
          filtered.sort((a, b) => a.name.localeCompare(b.name));
        else if (sortVal === "name-desc")
          filtered.sort((a, b) => b.name.localeCompare(a.name));

        renderProducts(filtered);
      }

      // Event Listeners
      document.getElementById("priceFilter").addEventListener("input", (e) => {
        document.getElementById("priceValue").innerText = parseInt(
          e.target.value
        ).toLocaleString();
        applyFilters();
      });
      document
        .querySelectorAll(".brandFilter")
        .forEach((b) => b.addEventListener("change", applyFilters));
      document
        .querySelectorAll(".ratingFilter")
        .forEach((r) => r.addEventListener("change", applyFilters));
      document
        .getElementById("sortProducts")
        .addEventListener("change", applyFilters);

      // Load
      loadProducts();
    </script>
  </body>
</html>
